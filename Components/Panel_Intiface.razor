@page "/Intiface"
@using ZeniControlSuite.Services
@layout ZeniControlSuite.Components.Layout.NoMenuLayout

<MudItem>
    <MudText Typo="Typo.h6">Intiface</MudText>
</MudItem>


<MudGrid Justify="Justify.Center" Style="width: 600px;align-items:center">
	<MudItem xs="6">
		<MudButton Variant="Variant.Filled" Color="Color.Success" Disabled="@IntifaceService.EnableIntiface" OnClick="EnableIntiface">Enable Intiface</MudButton>
	</MudItem>

	<MudItem xs="6">
		@if (IntifaceService.FullStop)
		{
			<MudButton Variant="Variant.Outlined" Color="Color.Primary" OnClick="PowerFullStop">STOPPED</MudButton>
		}
		else
		{
			<MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="PowerFullStop">Full Stop</MudButton>
		}
	</MudItem>

    <MudGrid Justify="Justify.Center">
        <MudItem xs="11">
            <MudGrid >
                <MudItem xs="12">
                    <MudSelect Label="Pattern" @bind-Value="@IntifaceService.PatternType" Variant="Variant.Filled" Color="Color.Primary">
						@foreach (var pattern in Enum.GetValues<PatternType>().ToList())
						{
							<MudSelectItem Value="@pattern">@pattern.ToString()</MudSelectItem>
						}
                    </MudSelect>
                </MudItem>

                @* Values that only appear if the patType is Wave*@
                @if (IntifaceService.PatternType == PatternType.Wave)
				{
                    <MudItem xs="6">
                        <MudNumericField @bind-Value="@IntifaceService.PatSpeedClimb" Label="Climb Speed" Variant="Variant.Outlined" Min="0.1" Max="10.0" Step="0.1" Format="N1" />
                    </MudItem>

                    <MudItem xs="6">
                        <MudNumericField @bind-Value="@IntifaceService.PatSpeedDrop" Label="Drop Speed" Variant="Variant.Outlined" Min="0.1" Max="10.0" Step="0.1" Format="N1" />
                    </MudItem>
				}

                <MudItem xs="3">
                    <MudNumericField @bind-Value="@IntifaceService.PatRandomOffTimeMin" Label="Off Min Sec" Variant="Variant.Outlined" Min="0" Max="29.9" Step="0.1" Format="N1" />
                </MudItem>
                <MudItem xs="3">
                    <MudNumericField @bind-Value="@IntifaceService.PatRandomOffTimeMax" Label="Off Max Sec" Variant="Variant.Outlined" Min="0" Max="30" Step="0.1" Format="N1" />
                </MudItem>
                <MudItem xs="3">
                    <MudNumericField @bind-Value="@IntifaceService.PatRandomOnTimeMin" Label="On Min Sec" Variant="Variant.Outlined" Min="0" Max="9.9" Step="0.1" Format="N1" />
                </MudItem>
                <MudItem xs="3">
                    <MudNumericField @bind-Value="@IntifaceService.PatRandomOnTimeMax" Label="On Max Sec" Variant="Variant.Outlined" Min="0" Max="10" Step="0.1" Format="N1" />
                </MudItem>

@*                 <MudItem xs="1">
                    <MudCheckBox @bind-Value="IntifaceService.patUseRandomPowerOutput" Label="Use Random PowerOutput" />
                </MudItem> *@

                <MudItem xs="5">
                    <MudNumericField @bind-Value="@IntifaceService.PatRandomPowerMin" Label="Min Strength" Variant="Variant.Outlined" Min="0" Max="1" Step="0.1" Format="N1" />
                </MudItem>

                <MudItem xs="2">
                    <MudSwitch @bind-Value="@IntifaceService.PatUseRandomPower" Size="Size.Large" Color="Color.Primary" UnCheckedColor="Color.Secondary" />
                </MudItem>

                <MudItem xs="5">
                    <MudNumericField @bind-Value="@IntifaceService.PatRandomPowerMax" Label="Max Strength" Variant="Variant.Outlined" Min="0" Max="1" Step="0.1" Format="N1" />
                </MudItem>

                <MudItem xs="12">
                    <MudSlider Vertical="false" Color="Color.Success" Variant="Variant.Filled" Size="Size.Large" Min="0.0" Max="1.0" Step="0.05" @bind-Value="@IntifaceService.PowerInput">Multiplier</MudSlider>
                </MudItem>

            </MudGrid>
        </MudItem>

        <MudItem xs="1">
            <MudProgressLinear Vertical="true" Color="Color.Primary" Striped="true" Size="Size.Large" Min="0.0" Max="1.0" @bind-Value="@IntifaceService.PowerOutput"/>
        </MudItem>

    </MudGrid>
</MudGrid>


@*  *@